# =============================================================================
# Yousoon Sites - Classic Mode Values (Production)
# =============================================================================
# Tous les sites web avec pods séparés (classic mode)
# - Admin (backoffice interne)
# - Partners (portail partenaires)
# - Website (site vitrine Next.js)
# =============================================================================

global:
  infra: "classic"
  namespace: yousoon-prod
  imageRegistry: "499771322424.dkr.ecr.eu-west-1.amazonaws.com"
  imagePullPolicy: IfNotPresent

common:
  replicas: 2

# =============================================================================
# Admin Backoffice (React) - ENABLED
# =============================================================================
admin:
  enabled: true
  image:
    repository: yousoon/web-admin
    tag: prod
  port: 80

  resources: {}

  env:
    - name: NODE_ENV
      value: production
    - name: VITE_API_URL
      value: "https://api.yousoon.com/graphql"

  ingress:
    enabled: true
    host: admin.yousoon.com

  classic:
    replicaCount: 2

# =============================================================================
# Partners Portal (React) - ENABLED
# =============================================================================
partners:
  enabled: true
  image:
    repository: yousoon/web-partners
    tag: prod
  port: 80

  resources: {}

  env:
    - name: NODE_ENV
      value: production
    - name: VITE_API_URL
      value: "https://api.yousoon.com/graphql"

  ingress:
    enabled: true
    host: business.yousoon.com

  classic:
    replicaCount: 2

# =============================================================================
# Site Vitrine (Next.js) - ENABLED
# =============================================================================
website:
  enabled: true
  image:
    repository: yousoon/website
    tag: prod
  port: 3000

  resources: {}

  env:
    - name: NODE_ENV
      value: production
    - name: NEXT_PUBLIC_API_URL
      value: "https://api.yousoon.com/graphql"

  ingress:
    enabled: true
    host: www.yousoon.com

  classic:
    replicaCount: 2

  # Production: anti-affinity pour distribuer sur plusieurs nodes
  affinity:
    podAntiAffinity:
      preferredDuringSchedulingIgnoredDuringExecution:
        - weight: 100
          podAffinityTerm:
            labelSelector:
              matchLabels:
                app.kubernetes.io/name: siteweb
            topologyKey: kubernetes.io/hostname

