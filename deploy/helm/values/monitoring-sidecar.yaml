# =============================================================================
# Yousoon Monitoring - Sidecar Mode Values
# =============================================================================
# Mode sidecar: Tous les outils monitoring dans un seul Pod
# Recommandé pour: staging, développement, environnements à ressources limitées
# =============================================================================

global:
  infra: "sidecar"
  namespace: yousoon-staging
  imagePullSecrets: []

# =============================================================================
# Pod Configuration (sidecar mode)
# =============================================================================
pod:
  annotations:
    prometheus.io/scrape: "true"
    prometheus.io/port: "9090"
  nodeSelector: {}
  tolerations: []
  affinity: {}

# =============================================================================
# Prometheus
# =============================================================================
prometheus:
  enabled: true
  image: prom/prometheus:v2.47.0
  port: 9090
  
  retention: 7d
  retentionSize: 5GB
  
  resources:
    requests:
      memory: "256Mi"
      cpu: "100m"
    limits:
      memory: "512Mi"
      cpu: "500m"
  
  persistence:
    enabled: true
    size: 10Gi
    storageClass: ""

# =============================================================================
# Grafana
# =============================================================================
grafana:
  enabled: true
  image: grafana/grafana:10.2.0
  port: 3000
  
  adminUser: admin
  # adminPassword via secret: yousoon-monitoring-secrets
  
  resources:
    requests:
      memory: "128Mi"
      cpu: "50m"
    limits:
      memory: "256Mi"
      cpu: "200m"
  
  persistence:
    enabled: true
    size: 2Gi
    storageClass: ""

  ingress:
    enabled: false
    host: grafana.yousoon.com

# =============================================================================
# Loki (Logs)
# =============================================================================
loki:
  enabled: true
  image: grafana/loki:2.9.2
  port: 3100
  
  resources:
    requests:
      memory: "128Mi"
      cpu: "50m"
    limits:
      memory: "256Mi"
      cpu: "200m"
  
  persistence:
    enabled: true
    size: 5Gi
    storageClass: ""

# =============================================================================
# Promtail (Log collector - DaemonSet)
# =============================================================================
promtail:
  enabled: true
  image: grafana/promtail:2.9.2
  
  resources:
    requests:
      memory: "64Mi"
      cpu: "25m"
    limits:
      memory: "128Mi"
      cpu: "100m"

# =============================================================================
# Jaeger (Tracing)
# =============================================================================
jaeger:
  enabled: true
  image: jaegertracing/all-in-one:1.51
  
  ports:
    query: 16686
    collector: 14268
    agent: 6831
    otlpGrpc: 4317
    otlpHttp: 4318
  
  resources:
    requests:
      memory: "128Mi"
      cpu: "50m"
    limits:
      memory: "256Mi"
      cpu: "200m"
  
  persistence:
    enabled: false  # In-memory for staging
