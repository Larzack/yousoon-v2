# =============================================================================
# Yousoon Platform - Staging Values
# =============================================================================
# Staging environment with SIDECAR mode (components grouped in single pods)
# This saves resources and is ideal for development/staging.
#
# Usage:
#   helm install yousoon ./charts/yousoon -f values-staging.yaml
# =============================================================================

global:
  infra: "sidecar"
  namespace: yousoon-staging
  environment: staging
  domain: staging.yousoon.com
  imageRegistry: "499771322424.dkr.ecr.eu-west-1.amazonaws.com"
  imagePullPolicy: Always

  labels:
    app.kubernetes.io/part-of: yousoon
    app.kubernetes.io/managed-by: helm
    environment: staging

# =============================================================================
# Enable Components
# =============================================================================
storage:
  enabled: true

services:
  enabled: true

sites:
  enabled: true

monitoring:
  enabled: false

# =============================================================================
# Storage - Staging Settings (Sidecar Mode)
# =============================================================================
yousoon-storage:
  global:
    infra: "sidecar"
    namespace: yousoon-staging

  mongodb:
    enabled: true
    replicaCount: 1
    persistence:
      size: 10Gi

  redis:
    enabled: true
    persistence:
      size: 2Gi

  nats:
    enabled: true
    jetstream:
      fileStorage:
        size: 2Gi

  elasticsearch:
    enabled: true
    persistence:
      size: 10Gi

# =============================================================================
# Services - Staging Settings (Sidecar Mode)
# =============================================================================
yousoon-services:
  global:
    infra: "sidecar"
    namespace: yousoon-staging

  identity:
    enabled: true
    replicaCount: 1

  partner:
    enabled: true
    replicaCount: 1

  discovery:
    enabled: true
    replicaCount: 1

  booking:
    enabled: true
    replicaCount: 1

  engagement:
    enabled: true
    replicaCount: 1

  notification:
    enabled: true
    replicaCount: 1

  router:
    enabled: true
    replicaCount: 1

# =============================================================================
# Sites - Staging Settings (Sidecar Mode)
# =============================================================================
yousoon-sites:
  fullnameOverride: "yousoon-website"
  global:
    infra: "sidecar"
    namespace: yousoon-staging

  admin:
    enabled: true
    replicaCount: 1
    ingress:
      enabled: false  # Access via port-forward only

  partners:
    enabled: true
    replicaCount: 1
    ingress:
      enabled: true
      host: business.staging.yousoon.com

  siteweb:
    enabled: true
    replicaCount: 1
    ingress:
      enabled: true
      host: staging.yousoon.com
